# Online Book Store Database Project

**Project period:** April 2025 – May 2025

## Overview

This repository contains a MySQL-based analysis for an online book store. The project ingests CSV data into a MySQL schema and implements 20+ SQL queries to answer business questions about inventory, sales, customers, and revenue. Queries range from basic filters and aggregates to intermediate joins and an advanced stock/revenue reconciliation.

---

## Datasets (CSV files)

* **Books.csv**

  * `Book_ID`, `Title`, `Author`, `Genre`, `Published_Year`, `Price`, `Stock`

* **Customers.csv**

  * `Customer_ID`, `Name`, `Email`, `Phone`, `City`, `Country`

* **Orders.csv**

  * `Order_ID`, `Customer_ID`, `Book_ID`, `Order_Date`, `Quantity`, `Total_Amount`

* **employee\_data.csv**

  * `employee_id`, `first_name`, `last_name`, `email`, `department`, `salary`, `joining_date`, `age`

> Note: `employee_data.csv` is included as supporting data for HR-related queries (not the primary focus of sales analysis) but is available in the repository for completeness.

---

## Database schema (example)

Below are simple DDL statements you can use as a starting point in MySQL. Adjust types and constraints as needed for your dataset.

```sql
CREATE TABLE books (
  Book_ID INT PRIMARY KEY,
  Title VARCHAR(255),
  Author VARCHAR(255),
  Genre VARCHAR(100),
  Published_Year INT,
  Price DECIMAL(10,2),
  Stock INT
);

CREATE TABLE customers (
  Customer_ID INT PRIMARY KEY,
  Name VARCHAR(255),
  Email VARCHAR(255),
  Phone VARCHAR(50),
  City VARCHAR(100),
  Country VARCHAR(100)
);

CREATE TABLE orders (
  Order_ID INT PRIMARY KEY,
  Customer_ID INT,
  Book_ID INT,
  Order_Date DATE,
  Quantity INT,
  Total_Amount DECIMAL(10,2),
  FOREIGN KEY (Customer_ID) REFERENCES customers(Customer_ID),
  FOREIGN KEY (Book_ID) REFERENCES books(Book_ID)
);

CREATE TABLE employee_data (
  employee_id INT PRIMARY KEY,
  first_name VARCHAR(100),
  last_name VARCHAR(100),
  email VARCHAR(255),
  department VARCHAR(100),
  salary DECIMAL(12,2),
  joining_date DATE,
  age INT
);
```

---

## How to load the CSVs into MySQL

1. Create the schema/tables in your database (see DDL above).
2. Use `LOAD DATA INFILE` (or MySQL Workbench / MySQL Shell import) to import CSV files:

```sql
LOAD DATA INFILE '/path/to/Books.csv'
INTO TABLE books
FIELDS TERMINATED BY '\t' -- or ',' depending on your CSV
IGNORE 1 LINES
(Book_ID, Title, Author, Genre, Published_Year, Price, Stock);
```

3. Verify counts with `SELECT COUNT(*) FROM books;` etc.

---

## Queries and solutions

Below are the project questions and the SQL solutions used. I’ve cleaned up and improved some queries for correctness and clarity.

### Q1 — Retrieve all books in the "Fiction" genre

```sql
SELECT *
FROM books
WHERE Genre = 'Fiction';
```

### Q2 — Find books that were published after 1950

```sql
SELECT *
FROM books
WHERE Published_Year > 1950
ORDER BY Published_Year;
```

### Q3 — List all customers from Canada

```sql
SELECT *
FROM customers
WHERE Country = 'Canada';
```

### Q4 — Show orders placed in November 2023

```sql
SELECT *
FROM orders
WHERE Order_Date BETWEEN '2023-11-01' AND '2023-11-30'
ORDER BY Order_Date;
```

### Q5 — Retrieve the total stock of books available

```sql
SELECT SUM(Stock) AS total_stock
FROM books;
```

### Q6 — Find the details of the most expensive book

```sql
SELECT *
FROM books
ORDER BY Price DESC
LIMIT 1;
```

### Q7 — Show all orders where quantity > 1 (customers who ordered multiple copies in a single order)

```sql
SELECT *
FROM orders
WHERE Quantity > 1;
```

*If you want the list of customers who have placed at least one multi-item order:*

```sql
SELECT DISTINCT Customer_ID
FROM orders
WHERE Quantity > 1;
```

### Q8 — Retrieve all orders where total amount exceeds \$20

```sql
SELECT *
FROM orders
WHERE Total_Amount > 20.00
ORDER BY Total_Amount;
```

### Q9 — List all genres present in the books table

```sql
SELECT DISTINCT Genre
FROM books;
```

### Q10 — Find the book(s) with the lowest stock

```sql
-- Option A: single row (lowest stock value)
SELECT *
FROM books
ORDER BY Stock
LIMIT 1;

-- Option B: list all books that are out of stock (Stock = 0)
SELECT *
FROM books
WHERE Stock = 0;
```

### Q11 — Calculate the total revenue generated by all orders

```sql
SELECT SUM(Total_Amount) AS Total_Revenue
FROM orders;
```

### Q12 (Advanced) — Total amount of books sold for each genre

```sql
SELECT b.Genre,
       COALESCE(SUM(o.Quantity), 0) AS total_sold
FROM books b
LEFT JOIN orders o ON b.Book_ID = o.Book_ID
GROUP BY b.Genre
ORDER BY total_sold DESC;
```

### Q13 — Find the average price of books in the "Fantasy" genre

```sql
SELECT AVG(Price) AS avg_price
FROM books
WHERE Genre = 'Fantasy';
```

### Q14 — List customers who have placed at least 2 orders

```sql
SELECT c.Customer_ID, c.Name, COUNT(o.Order_ID) AS order_count
FROM customers c
JOIN orders o ON c.Customer_ID = o.Customer_ID
GROUP BY c.Customer_ID, c.Name
HAVING COUNT(o.Order_ID) >= 2;
```

### Q15 — Find the most frequently ordered book (by total quantity sold)

```sql
SELECT b.Book_ID, b.Title, SUM(o.Quantity) AS total_quantity
FROM books b
JOIN orders o ON b.Book_ID = o.Book_ID
GROUP BY b.Book_ID, b.Title
ORDER BY total_quantity DESC
LIMIT 1;
```

### Q16 — Show the top 3 books of the 'Fantasy' genre (by price)

```sql
SELECT *
FROM books
WHERE Genre = 'Fantasy'
ORDER BY Price DESC
LIMIT 3;
```

### Q17 — Retrieve the total quantity of books sold by each author

```sql
SELECT b.Author, SUM(o.Quantity) AS total_sold
FROM books b
JOIN orders o ON b.Book_ID = o.Book_ID
GROUP BY b.Author
ORDER BY total_sold DESC;
```

> Note: Q17/Q18 appeared duplicated in the original list — consolidated here.

### Q19 — List the cities where customers who spent over \$30 are located

```sql
SELECT c.City, SUM(o.Total_Amount) AS city_spend
FROM customers c
JOIN orders o ON c.Customer_ID = o.Customer_ID
GROUP BY c.City
HAVING SUM(o.Total_Amount) > 30.00
ORDER BY city_spend DESC;
```

### Q20 — Find the customers who spent the most on orders (ranked)

```sql
SELECT c.Customer_ID, c.Name, SUM(o.Total_Amount) AS total_spent
FROM customers c
JOIN orders o ON c.Customer_ID = o.Customer_ID
GROUP BY c.Customer_ID, c.Name
ORDER BY total_spent DESC;
```

### Q21 — Calculate the stock remaining after fulfilling all the orders

```sql
SELECT b.Book_ID,
       b.Title,
       b.Stock,
       COALESCE(SUM(o.Quantity), 0) AS Ordered_Quantity,
       b.Stock - COALESCE(SUM(o.Quantity), 0) AS Remaining_Stock
FROM books b
LEFT JOIN orders o ON b.Book_ID = o.Book_ID
GROUP BY b.Book_ID, b.Title, b.Stock
ORDER BY Remaining_Stock ASC;
```


---

## Results & Findings

* Total Stock : '25056'
* Most Expensive Book : Book_ID: '340', Title: 'Proactive system-worthy orchestration', Author: 'Robert Scott', Genre: 'Mystery', Published_Year: '1907', Price: '49.98', Stock: '88'
* Genre : 'Science Fiction', 'Romance', 'Non-Fiction', 'Mystery', 'Fiction', 'Fantasy', 'Biography'
* Total Revenue Generated : '75628.66'
* Most Frequently ordered Book : Book_ID: '301', Title: 'Polarized high-level installation', Quantity: '10'
